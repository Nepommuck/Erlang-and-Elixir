<div id="page">
    <h2 class="sectionedit1" id="laboratorium_nr_4_-_wzorce_projektowe_i_otp">Laboratorium nr 4 - wzorce projektowe i OTP</h2>
    <div class="level2">
    
    <p>
    <br>
    
    </p>
    
    </div>
    
    <h4 id="przed_zajeciami">Przed zajęciami</h4>
    <div class="level4">
    
    <p>
    <br>
    
    </p>
    <ol>
    <li class="level1"><div class="li"> Wykonaj <strong><a href="/~wojturek/dokuwiki/doku.php?id=student:erlang:elab4_warmup" class="wikilink1" title="student:erlang:elab4_warmup" data-wiki-id="student:erlang:elab4_warmup">wprowadzenie do OTP</a></strong>.</div>
    </li>
    <li class="level1"><div class="li"> Przeczytaj <strong><a href="http://rebar3.org/docs/basic_usage/" class="urlextern" title="http://rebar3.org/docs/basic_usage/" rel="ugc nofollow">wprowadzenie do Rebara</a></strong>.</div>
    </li>
    </ol>
    
    <p>
    <br>
    
    </p>
    
    </div>
    
    <h4 id="cele_zajec">Cele zajęć</h4>
    <div class="level4">
    
    <p>
    <br>
    
    </p>
    <ol>
    <li class="level1"><div class="li"> Poznanie narzędzia rebar3.</div>
    </li>
    <li class="level1"><div class="li"> Zapoznanie z wzorcami projektowymi OTP: gen_server, supervisor, gen_statem, application</div>
    </li>
    </ol>
    
    </div>
    
    <h4 id="przebieg_zajec">Przebieg zajęć</h4>
    <div class="level4">
    
    <p>
    <br>
    
    </p>
    
    </div>
    
    <h5 id="rebar">rebar</h5>
    <div class="level5">
    
    <p>
    <br>
    
    </p>
    <ol>
    <li class="level1"><div class="li"> Przy pomocy <em>rebar3</em> utwórz nowy projekt typu <em>app</em> w wybranym folderze.  </div>
    </li>
    <li class="level1"><div class="li"> Przeanalizuj strukturę generowane przez rebar. </div>
    </li>
    <li class="level1 node"><div class="li"> Otwórz projekt w IntelliJ metodą <em>New → Project From Existing Sources…</em></div>
    <ol>
    <li class="level2"><div class="li"> wskaż folder z wygenerowanymi źródłami,</div>
    </li>
    <li class="level2"><div class="li"> wybierz opcję <em>Create project from existring sources</em>,</div>
    </li>
    <li class="level2"><div class="li"> nie zmieniaj jego lokalizacji.</div>
    </li>
    </ol>
    </li>
    <li class="level1 node"><div class="li"> Skonfiguruj środowisko do współpracy z rebarem. </div>
    <ol>
    <li class="level2"><div class="li"> w <em>Settings → Other Settings → Erlang External Tools</em> skonfiguruj rebar3 </div>
    </li>
    <li class="level2"><div class="li"> w <em>Settings → Build… → Compiler → Erlang Compiler</em> włącz budowanie rebarem </div>
    </li>
    </ol>
    </li>
    <li class="level1 node"><div class="li"> Dodaj i uruchom konfigurację uruchomieniową typu Rebar startującą polecenie <em>shell</em>. </div>
    <ol>
    <li class="level2"><div class="li"> inne polecenia rebara: <a href="https://www.rebar3.org/docs/commands" class="urlextern" title="https://www.rebar3.org/docs/commands" rel="ugc nofollow">https://www.rebar3.org/docs/commands</a></div>
    </li>
    </ol>
    </li>
    <li class="level1"><div class="li"> Uruchom <em>observer:start().</em> i sprawdź czy Twoja aplikacja jest uruchomiona. </div>
    </li>
    <li class="level1"><div class="li"> W konsoli możesz wywołać <em>application:stop(nazwaAplikacji).</em></div>
    </li>
    </ol>
    
    <p>
    <br>
    
    </p>
    
    </div>
    
    <h5 id="gen_server">gen_server</h5>
    <div class="level5">
    
    <p>
    <br>
    
    </p>
    <ol>
    <li class="level1"><div class="li"> Dodaj do źródeł projektu moduł <em>pollution_gen_server</em>. Wykorzystaj szkielet <em>OTP gen_server minimal</em>.</div>
    </li>
    <li class="level1 node"><div class="li"> Zmodyfikuj <em>pollution_gen_server</em> by udostępniał <abbr title="Application Programming Interface">API</abbr> zgodne z modułem <em>pollution</em> z poprzednich zajęć: </div>
    <ul>
    <li class="level2"><div class="li"> <strong>addStation/2</strong>,</div>
    </li>
    <li class="level2"><div class="li"> <strong>addValue/4</strong>,</div>
    </li>
    <li class="level2"><div class="li"> <strong>getOneValue/3</strong></div>
    </li>
    <li class="level2"><div class="li"> … pozostałe funkcje modułu pollution, ale wcześniej:  </div>
    </li>
    </ul>
    </li>
    <li class="level1"><div class="li"> Dodaj do interfejsu serwera funkcję <strong>crash/0</strong>, która spowoduje wykonanie niepoprawnej operacji w procesie serwera. </div>
    </li>
    </ol>
    
    <p>
    <br>
    
    </p>
    
    </div>
    
    <h5 id="supervisor">supervisor</h5>
    <div class="level5">
    
    <p>
    <br>
    
    </p>
    <ol>
    <li class="level1"><div class="li"> Dodaj <em>pollution_gen_server</em> do listy serwerów startowanych i nadzorowanych przez domyślnego supervisora.</div>
    </li>
    <li class="level1"><div class="li"> Sprawdź teraz działanie funkcji <strong>crash/0</strong>. </div>
    </li>
    <li class="level1"><div class="li"> Co dzieje się z danymi w przypadku awarii serwera? Jak można naprawić ten problem? </div>
    </li>
    </ol>
    
    <p>
    <br>
    
    </p>
    
    </div>
    
    <h5 id="gen_statem">gen_statem</h5>
    <div class="level5">
    
    <p>
    <br>
    
    </p>
    <ol>
    <li class="level1"><div class="li"> Dodaj moduł <em>pollution_value_collector_gen_statem</em>, który będzie pozwalał na dodawanie wielu danych do ustalonej stacji poprzez kolejne wywołania funkcji. </div>
    </li>
    <li class="level1 node"><div class="li"> Moduł realizuje wzorzec OTP gen_statem; <abbr title="Application Programming Interface">API</abbr> modułu: </div>
    <ul>
    <li class="level2"><div class="li"> <strong>start_link(), stop(),</strong> </div>
    </li>
    <li class="level2"><div class="li"> <strong>set_station(…)</strong></div>
    </li>
    <li class="level2"><div class="li"> <strong>add_value(…)</strong></div>
    </li>
    <li class="level2"><div class="li"> <strong>store_data()</strong></div>
    </li>
    </ul>
    </li>
    <li class="level1"><div class="li"> Trzy powyższe funkcje muszą być wykonane w kolejności, przy czym <strong>add_value</strong> może być wykonana wiele razy. </div>
    </li>
    <li class="level1"><div class="li"> Dopiero po wykonaniu <strong>store_data</strong> wszystkie pomiary są dodawane do serwera zanieczyszczeń, a <em>pollution_value_collector</em> wraca do stanu oczekiwania na wybór stacji. </div>
    </li>
    </ol>
    
    <p>
    <br>
    
    </p>
    
    </div>
    
    <h4 id="zadanie_domowe">Zadanie domowe</h4>
    <div class="level4">
    
    <p>
    <br>
    
    </p>
    <ol>
    <li class="level1"><div class="li"> Dokończ budowanie kompletnej aplikacji. </div>
    </li>
    <li class="level1"><div class="li"> Sprawdź czy poprawnie działa i poprawnie obsługuje błędy. </div>
    </li>
    </ol>
    
    </div>
    
        
        
                <div class="meta">
                  <div class="user">
                  Zalogowany jako: <bdi>Student </bdi> (<bdi>erlang</bdi>)			  </div>
                  <div class="doc">
                  <bdi>student/erlang/elab4-2023.txt</bdi> · ostatnio zmienione: 2023/04/24 13:19 przez <bdi>wtur</bdi>			  </div>
                </div>
        
        </div>